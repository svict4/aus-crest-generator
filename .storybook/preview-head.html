<script>
  function saveSvg(svgEl, name) {
    svgEl.setAttribute("xmlns", "http://www.w3.org/2000/svg");
    svgEl.append(`<metadata>
      <rdf:RDF
           xmlns:rdf = "http://www.w3.org/1999/02/22-rdf-syntax-ns#"
           xmlns:rdfs = "http://www.w3.org/2000/01/rdf-schema#"
           xmlns:dc = "http://purl.org/dc/elements/1.1/" >
        <rdf:Description about="https://simonvictory.com/aus-crest-generator/"
             dc:title="${name}"
             dc:description="Australian Government Coat of Arms"
             dc:publisher="Australian Government"
             dc:rightsHolder="Australian Government Department of Prime Minister and Cabinet, Honours and Symbols Section"
             dc:source="https://simonvictory.com/aus-crest-generator/"
             dc:created="${new Date().toISOString()}"
             dc:format="image/svg+xml"
             dc:language="en" >
          <dc:creator>
            <rdf:Bag>
              <rdf:li>Australian Government</rdf:li>
              <rdf:li>Simon Victory</rdf:li>
            </rdf:Bag>
          </dc:creator>
        </rdf:Description>
      </rdf:RDF>
    </metadata>`);
    var svgData = svgEl.outerHTML;
    var preface = '<?xml version="1.0" standalone="no"?>\r\n';
    var svgBlob = new Blob([preface, svgData], {
      type: "image/svg+xml;charset=utf-8",
    });
    var svgUrl = URL.createObjectURL(svgBlob);
    var downloadLink = document.createElement("a");
    downloadLink.href = svgUrl;
    downloadLink.download = name;
    document.body.appendChild(downloadLink);
    downloadLink.click();
    document.body.removeChild(downloadLink);
  }
</script>
<button
  id="download-svg"
  style="
    display: flex;
    position: fixed;
    left: 10px;
    border: 3px solid rgba(0, 0, 0, 0.1);
    border-radius: 4px;
    background-color: rgba(255, 255, 255, 0.97);
    box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  "
  onclick="if (document.querySelector('#root > svg') !== null) { 
      saveSvg(document.querySelector('#root > svg'), 
      'AusGovCoatOfArms-' + parent.document.getElementsByTagName('title')[0].innerHTML.slice(0, -12).replace(/\s+/g, '')) 
    } else { 
      alert('This story doesn\'t contain an exportable SVG') 
    }"
>
  Download this SVG
</button>